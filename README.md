# Christian Garbin blog

Personal blog - published [here](https://cgarbin.github.io/).

The blog uses [Jekyll](http://jekyllrb.com/) and the [Minimal Mistakes theme](https://mmistakes.github.io/minimal-mistakes/).

Organization:

- Posts are in the `_posts` directory.
- Images are in the `images` directory.
- Static pages are in the `_pages` directory.

## Releasing new posts

1. Test the posts locally with `bundle exec jekyll serve`
   1. Open a browser window to the address shown
1. Stop the local server
1. Generate the final version with `bundle exec jekyll build`
1. Release them with `./publish.sh`
   1. This will push the files generated by the `... jekyll build` command to the `gh-pages` branch

It's IMPORTANT to release the version generate with `... jekyll build` and not the one generated with `... jekyll serve`. The `serve` option generates links to `localhost` and not to the actual site.

## Linking to another post

In post text: `[this post]({% post_url 2021-02-01-bias-data-science-machine-learning %})`

In excerpts: `[this post](bias-data-science-machine-learning)`

## Adding links to a post's sidebar

Add a new entry in navigation.yaml. Example:

```yaml
sidebar-2022-09-19: # post's date, to help correlate
  - title: "More..."
    children:
      - title: '<i class="fas fa-book-open" style="color:blue"></i> Transfomers in computer vision'
        url: /transformers-in-computer-vision
      - title: '<i class="fas fa-code" style="color:blue""></i> Code for this article'
        url: https://github.com/fau-masters-collected-works-cgarbin/writing-good-jupyter-notebooks
```

Point to the entry in the post's front matter:

```yaml
---
title: "..."
...
sidebar:
  title: ""
  nav: sidebar-2022-09-19  # <-- the entry in navigation.yaml
---
```

## Adding new pages (other than posts)

Add a new .md in _pages, then, if needed, add a link to the top navigation bar with [these instructions](#adding-pages-to-the-top-navigation-bar).

## Adding pages to the top navigation bar

Modify `navigation.yml`:

```yaml
main:
  - title: Tags'
    url: /tags/
  - title: 'About'
    url: /about/
```

## Adding tags and categories pages

This method uses [the jekyll-archives plugin](https://github.com/jekyll/jekyll-archives).

The instructions below are based on the [Minimal Mistakes documentation](https://mmistakes.github.io/minimal-mistakes/docs/configuration/#archive-settings). If there is any discrepancy between the instructions and the plugin documentation, follow the plugin documentation.

Add the plugin to the `Gemfile`:

```text
group :jekyll_plugins do
  gem "jekyll-archives"
end
```

Install the plugin:

```bash
bundle install
```

Add the plugin to the `plugins` section in `_config.yml`:

```yaml
plugins:
  ...
  - jekyll-archives
```

Set the `..._archives` variables in `_config.yml` to use the plugin:

```yaml
category_archive:
  type: jekyll-archives
  path: /categories/
tag_archive:
  type: jekyll-archives
  path: /tags/
```

Uncomment (or add) the plugin configuration section in `_config.yml`:

```yaml
jekyll-archives:
  enabled:
    - categories
    - tags
  layouts:
    category: archive-taxonomy
    tag: archive-taxonomy
  permalinks:
    category: /categories/:name/
    tag: /tags/:name/
```

Copy the Minimal Mistakes tag and categories pages.

```bash
mkdir _pages
cp docs/_pages/category-archive.md _pages
cp docs/_pages/tag-archive.md _pages
```

## Updating Jekyll and theme

Update Jekyll

```bash
bundle update
git add Gemfile.lock
git commit -m "Update Jekyll"
```

Update Minimal Mistakes theme

```bash
cd ../minimal-mistakes
git pull --rebase

cd ../cgarbin.github.io
# Restore Reddt sharing:
#   - _buttons.scss: add Reddit color
#   - social-share.html: remove Facebook, add Reddit
# Check that CSS customization was not lost
#   - assets/css/main.scss must have .page__hero customizations

git add .
git commit -m "Update Minimal Mistakes theme"
```
